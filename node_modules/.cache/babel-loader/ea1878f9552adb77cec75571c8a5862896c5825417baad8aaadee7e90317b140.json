{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Marc\\\\Desktop\\\\futbol-dashboard\\\\frontend\\\\src\\\\components\\\\dashboard\\\\CoachInicio.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { authHeader } from '../../services/auth';\nimport { PieChart, Pie, Cell, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, Sector } from 'recharts';\n\n// CONSTANTES Y FUNCIONES AUXILIARES GLOBALES AL ARCHIVO (si las tienes fuera del componente)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CHART_COLORS = {\n  primary: 'var(--primary-color, #3f51b5)',\n  success: 'var(--success-color, #66bb6a)',\n  warning: 'var(--warning-color, #ffa726)',\n  danger: 'var(--danger-color, #f44336)',\n  info: 'var(--info-color, #29b6f6)',\n  purple: '#6f42c1',\n  neutralLight: 'rgba(0,0,0,0.5)',\n  neutralDark: 'rgba(0,0,0,0.8)'\n};\nconst PIE_CHART_COLORS = [CHART_COLORS.primary, CHART_COLORS.success, CHART_COLORS.warning, CHART_COLORS.info, CHART_COLORS.purple];\nconst CustomTooltip = ({\n  active,\n  payload,\n  label\n}) => {\n  if (active && payload && payload.length) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"custom-tooltip\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"label\",\n        children: `${label}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this), payload.map((entry, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: entry.color\n        },\n        children: `${entry.name}: ${entry.value}`\n      }, `item-${index}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this);\n  }\n  return null;\n};\n_c = CustomTooltip;\nconst renderActiveShape = props => {\n  const RADIAN = Math.PI / 180;\n  const {\n    cx,\n    cy,\n    midAngle,\n    innerRadius,\n    outerRadius,\n    startAngle,\n    endAngle,\n    fill,\n    payload,\n    percent,\n    value\n  } = props;\n  const sin = Math.sin(-RADIAN * midAngle);\n  const cos = Math.cos(-RADIAN * midAngle);\n  const sx = cx + (outerRadius + 8) * cos;\n  const sy = cy + (outerRadius + 8) * sin;\n  const mx = cx + (outerRadius + 25) * cos;\n  const my = cy + (outerRadius + 25) * sin;\n  const ex = mx + (cos >= 0 ? 1 : -1) * 20;\n  const ey = my;\n  const textAnchor = cos >= 0 ? 'start' : 'end';\n  return /*#__PURE__*/_jsxDEV(\"g\", {\n    children: [/*#__PURE__*/_jsxDEV(\"text\", {\n      x: cx,\n      y: cy,\n      dy: 4,\n      textAnchor: \"middle\",\n      fill: CHART_COLORS.neutralDark,\n      fontWeight: \"bold\",\n      children: payload.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n      x: cx,\n      y: cy,\n      dy: 22,\n      textAnchor: \"middle\",\n      fill: CHART_COLORS.neutralLight,\n      fontSize: \"0.9em\",\n      children: `${value} (${(percent * 100).toFixed(0)}%)`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Sector, {\n      cx: cx,\n      cy: cy,\n      innerRadius: innerRadius,\n      outerRadius: outerRadius,\n      startAngle: startAngle,\n      endAngle: endAngle,\n      fill: fill,\n      stroke: \"#fff\",\n      strokeWidth: 2\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Sector, {\n      cx: cx,\n      cy: cy,\n      startAngle: startAngle,\n      endAngle: endAngle,\n      innerRadius: outerRadius + 4,\n      outerRadius: outerRadius + 8,\n      fill: fill\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\nconst groupPlayerPositions = players => {\n  const positionGroups = {\n    Porteros: 0,\n    Defensas: 0,\n    Mediocampistas: 0,\n    Delanteros: 0\n  };\n  players.forEach(player => {\n    const pos = player.position;\n    if (['POR'].includes(pos)) positionGroups.Porteros++;else if (['DEF', 'LTD', 'LTI'].includes(pos)) positionGroups.Defensas++;else if (['MCD', 'MC', 'MCO', 'ED', 'EI'].includes(pos)) positionGroups.Mediocampistas++;else if (['SD', 'DEL'].includes(pos)) positionGroups.Delanteros++;\n  });\n  return Object.entries(positionGroups).map(([name, value]) => ({\n    name,\n    value\n  })).filter(group => group.value > 0);\n};\nfunction CoachInicio({\n  setActivePage\n}) {\n  _s();\n  const navigate = useNavigate();\n  const user = JSON.parse(localStorage.getItem('user'));\n\n  // --- ESTADOS ---\n  const [team, setTeam] = useState(null);\n  const [playerCount, setPlayerCount] = useState(0);\n  const [upcomingSessionsCount, setUpcomingSessionsCount] = useState(0);\n  const [avgAttendance, setAvgAttendance] = useState(0);\n  const [playerPositionDistributionData, setPlayerPositionDistributionData] = useState([]);\n  const [sessionFrequencyData, setSessionFrequencyData] = useState([]);\n  const [playerMinutesData, setPlayerMinutesData] = useState([]);\n  const [loadingTeamInfo, setLoadingTeamInfo] = useState(true);\n  const [loadingSessionsInfo, setLoadingSessionsInfo] = useState(true);\n  const [loadingAttendanceInfo, setLoadingAttendanceInfo] = useState(true);\n  const [loadingCharts, setLoadingCharts] = useState(true);\n  const [activePieIndex, setActivePieIndex] = useState(0);\n  const [error, setError] = useState('');\n  const [tasksCountForStatCard, setTasksCountForStatCard] = useState(0);\n  const [loadingTasksCountForStatCard, setLoadingTasksCountForStatCard] = useState(true);\n\n  // --- FUNCIONES DE CARGA DE DATOS Y useEffect ---\n  useEffect(() => {\n    if (!user || !user.team) {\n      setError('No tienes un equipo asignado. Contacta con un administrador.');\n      setLoadingTeamInfo(false);\n      setLoadingTasksCountForStatCard(false);\n      setLoadingSessionsInfo(false);\n      setLoadingAttendanceInfo(false);\n      setLoadingCharts(false);\n      return;\n    }\n    loadTeamData();\n    loadTasksCountForStat();\n    loadSessionsSummary();\n    loadAttendanceSummary();\n    loadChartData();\n  }, [user === null || user === void 0 ? void 0 : user.team]); // Asegúrate que user.team esté en las dependencias si es necesario\n\n  const onPieClick = (_, index) => {\n    // Renombrado para mayor claridad, o puedes mantener onPieEnter\n    setActivePieIndex(index);\n  };\n  const loadTeamData = async () => {\n    /* ... tu implementación ... */\n    setLoadingTeamInfo(true);\n    try {\n      const teamResponse = await fetch(`http://localhost:8000/api/teams/${user.team}/`, {\n        headers: authHeader()\n      });\n      if (!teamResponse.ok) throw new Error('Error al cargar datos del equipo');\n      const teamData = await teamResponse.json();\n      setTeam(teamData);\n      const playersResponse = await fetch(`http://localhost:8000/api/teams/${user.team}/players/`, {\n        headers: authHeader()\n      });\n      if (playersResponse.ok) {\n        const playersData = await playersResponse.json();\n        setPlayerCount(Array.isArray(playersData) ? playersData.length : 0);\n      }\n    } catch (err) {\n      setError(prev => `${prev} Equipo: ${err.message};`);\n    } finally {\n      setLoadingTeamInfo(false);\n    }\n  };\n  const loadTasksCountForStat = async () => {\n    /* ... tu implementación ... */\n    setLoadingTasksCountForStatCard(true);\n    try {\n      const tasksResponse = await fetch('http://localhost:8000/api/tasks/', {\n        headers: authHeader()\n      });\n      if (!tasksResponse.ok) throw new Error('Error al cargar tareas');\n      const tasksData = await tasksResponse.json();\n      setTasksCountForStatCard(tasksData.length);\n    } catch (err) {\n      setError(prev => `${prev} Conteo Tareas: ${err.message};`);\n    } finally {\n      setLoadingTasksCountForStatCard(false);\n    }\n  };\n  const loadSessionsSummary = async () => {\n    /* ... tu implementación ... */\n    setLoadingSessionsInfo(true);\n    try {\n      const sessionsResponse = await fetch('http://localhost:8000/api/sessions/', {\n        headers: authHeader()\n      });\n      if (!sessionsResponse.ok) throw new Error('Error al cargar sesiones');\n      const sessionsData = await sessionsResponse.json();\n      const upcoming = sessionsData.filter(s => new Date(s.date) >= new Date() && new Date(s.date) <= new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)).length;\n      setUpcomingSessionsCount(upcoming);\n      const frequency = sessionsData.reduce((acc, session) => {\n        const month = new Date(session.date).toLocaleString('default', {\n          month: 'short'\n        });\n        acc[month] = (acc[month] || 0) + 1;\n        return acc;\n      }, {});\n      setSessionFrequencyData(Object.entries(frequency).map(([name, value]) => ({\n        name,\n        Sesiones: value\n      })).slice(-6));\n    } catch (err) {\n      setError(prev => `${prev} Sesiones: ${err.message};`);\n    } finally {\n      setLoadingSessionsInfo(false);\n    }\n  };\n  const loadAttendanceSummary = async () => {\n    /* ... tu implementación ... */\n    setLoadingAttendanceInfo(true);\n    try {\n      const response = await fetch(`http://localhost:8000/api/teams/${user.team}/attendance/summary/`, {\n        headers: authHeader()\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setAvgAttendance(data.average_attendance_percentage || 0);\n      } else {\n        setAvgAttendance(0);\n      }\n    } catch (err) {\n      setError(prev => `${prev} Asistencia: ${err.message};`);\n      setAvgAttendance(0);\n    } finally {\n      setLoadingAttendanceInfo(false);\n    }\n  };\n  const loadChartData = async () => {\n    /* ... tu implementación ... */\n    setLoadingCharts(true);\n    setError(prev => prev.replace(/Gráficos: [^;]+;/g, ''));\n    try {\n      const playersResponse = await fetch(`http://localhost:8000/api/teams/${user.team}/players/`, {\n        headers: authHeader()\n      });\n      if (playersResponse.ok) {\n        const playersData = await playersResponse.json();\n        if (Array.isArray(playersData)) setPlayerPositionDistributionData(groupPlayerPositions(playersData));else setPlayerPositionDistributionData([]);\n      } else throw new Error('Error al cargar jugadores para el gráfico de distribución');\n      const minutesResponse = await fetch(`http://localhost:8000/api/teams/${user.team}/minutes/?matches=false`, {\n        headers: authHeader()\n      });\n      if (minutesResponse.ok) {\n        const allMinutes = await minutesResponse.json();\n        const playerMinutesSum = allMinutes.reduce((acc, record) => {\n          const playerId = record.player_id || record.player;\n          acc[playerId] = acc[playerId] || {\n            name: `${record.player_name || 'Jugador'} ${record.player_last_name || ''}`.trim(),\n            minutes: 0\n          };\n          acc[playerId].minutes += record.minutes_played || 0;\n          return acc;\n        }, {});\n        setPlayerMinutesData(Object.values(playerMinutesSum).sort((a, b) => b.minutes - a.minutes).slice(0, 5));\n      } else throw new Error('Error al cargar minutos de jugadores');\n    } catch (err) {\n      setError(prev => `${prev} Gráficos: ${err.message};`);\n    } finally {\n      setLoadingCharts(false);\n    }\n  };\n  const onPieEnter = (_, index) => {\n    setActivePieIndex(index);\n  };\n\n  // ***** DEFINICIÓN DE FUNCIONES DE NAVEGACIÓN *****\n  const navigateTo = section => {\n    setActivePage(section);\n  };\n  const goToTeamManagement = () => {\n    if (user && user.team) {\n      navigate(`/team/${user.team}`);\n    } else {\n      console.error(\"Usuario o equipo del usuario no definido para goToTeamManagement.\");\n      setError(prev => `${prev} No se puede acceder a la gestión del equipo (usuario/equipo no definido);`);\n    }\n  };\n\n  // --- COMPONENTES LOCALES DE UI (SI LOS TIENES AQUÍ) ---\n  const StatCard = ({\n    icon,\n    title,\n    value,\n    color,\n    isLoading,\n    onClick\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `stat-card coach-stat-card ${color}`,\n    onClick: onClick,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stat-card-icon\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: `fas ${icon}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 39\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stat-card-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"stat-card-value\",\n        children: isLoading ? /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-spinner fa-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 56\n        }, this) : value\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"stat-card-title\",\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 235,\n    columnNumber: 5\n  }, this);\n  const QuickLinkCard = ({\n    icon,\n    title,\n    description,\n    onClick,\n    color\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `quick-link-card coach-quick-link ${color}`,\n    onClick: onClick,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"quick-link-icon\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: `fas ${icon}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 40\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"quick-link-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 40\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 56\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"quick-link-arrow\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-chevron-right\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 41\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 245,\n    columnNumber: 5\n  }, this);\n  const ChartWrapper = ({\n    title,\n    children,\n    isLoading,\n    hasData\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chart-container coach-chart-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chart-loading\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-spinner fa-spin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 53\n      }, this), \" Cargando datos...\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 22\n    }, this) : hasData === false || Array.isArray(hasData) && hasData.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"no-data-chart\",\n      children: \"No hay datos disponibles.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 84\n    }, this) : /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n      width: \"100%\",\n      height: 300,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 12\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 253,\n    columnNumber: 5\n  }, this);\n\n  // --- MANEJO DE ERROR INICIAL ---\n  if (error && !team && !(user !== null && user !== void 0 && user.team)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-wrapper coach-inicio-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"coach-welcome-header error-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error.includes(\"equipo asignado\") ? error : \"Error al cargar datos. \" + error.split(';')[0]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }, this);\n  }\n\n  // --- JSX DEL COMPONENTE ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"content-wrapper coach-inicio-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"coach-welcome-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Bienvenido, Entrenador \", (user === null || user === void 0 ? void 0 : user.first_name) || (user === null || user === void 0 ? void 0 : user.username), \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Aqu\\xED tienes un resumen de la actividad de tu equipo: \", loadingTeamInfo && !team ? /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-spinner fa-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 93\n        }, this) : /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: (team === null || team === void 0 ? void 0 : team.name) || 'Tu Equipo'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 138\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      style: {\n        margin: '0 20px 20px 20px'\n      },\n      children: error.split(';').map((e, i) => e.trim() && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: e.trim()\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 129\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stats-grid\",\n      children: [/*#__PURE__*/_jsxDEV(StatCard, {\n        icon: \"fa-users\",\n        title: \"Jugadores\",\n        value: playerCount,\n        isLoading: loadingTeamInfo,\n        color: \"blue\",\n        onClick: () => navigateTo('myteam')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        icon: \"fa-tasks\",\n        title: \"Tareas Creadas\",\n        value: tasksCountForStatCard,\n        isLoading: loadingTasksCountForStatCard,\n        color: \"green\",\n        onClick: () => navigateTo('tasks')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        icon: \"fa-calendar-check\",\n        title: \"Pr\\xF3ximas Sesiones\",\n        value: upcomingSessionsCount,\n        isLoading: loadingSessionsInfo,\n        color: \"orange\",\n        onClick: () => navigateTo('sessions')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        icon: \"fa-user-check\",\n        title: \"Asistencia Media\",\n        value: `${avgAttendance}%`,\n        isLoading: loadingAttendanceInfo,\n        color: \"purple\",\n        onClick: () => navigateTo('attendance')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"charts-section\",\n      children: [/*#__PURE__*/_jsxDEV(ChartWrapper, {\n        title: \"Distribuci\\xF3n de Jugadores por Posici\\xF3n\",\n        isLoading: loadingCharts,\n        hasData: playerPositionDistributionData.length > 0,\n        children: /*#__PURE__*/_jsxDEV(PieChart, {\n          children: [/*#__PURE__*/_jsxDEV(Pie, {\n            activeIndex: activePieIndex,\n            activeShape: renderActiveShape,\n            data: playerPositionDistributionData,\n            cx: \"50%\",\n            cy: \"50%\",\n            innerRadius: 60,\n            outerRadius: 90,\n            fill: CHART_COLORS.primary,\n            dataKey: \"value\",\n            onClick: onPieClick // CAMBIO: de onMouseEnter a onClick\n            ,\n            paddingAngle: 2,\n            children: playerPositionDistributionData.map((entry, index) => /*#__PURE__*/_jsxDEV(Cell, {\n              fill: PIE_CHART_COLORS[index % PIE_CHART_COLORS.length]\n            }, `cell-${index}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n            content: /*#__PURE__*/_jsxDEV(CustomTooltip, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ChartWrapper, {\n        title: \"Frecuencia de Sesiones (\\xDAltimos meses)\",\n        isLoading: loadingSessionsInfo,\n        hasData: sessionFrequencyData.length > 0,\n        children: /*#__PURE__*/_jsxDEV(BarChart, {\n          data: sessionFrequencyData,\n          children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n            strokeDasharray: \"3 3\",\n            stroke: \"rgba(0,0,0,0.1)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(XAxis, {\n            dataKey: \"name\",\n            tick: {\n              fill: CHART_COLORS.neutralLight\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 78\n          }, this), \" \", /*#__PURE__*/_jsxDEV(YAxis, {\n            tick: {\n              fill: CHART_COLORS.neutralLight\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 146\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n            content: /*#__PURE__*/_jsxDEV(CustomTooltip, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(Legend, {\n            wrapperStyle: {\n              color: CHART_COLORS.neutralDark\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 53\n          }, this), /*#__PURE__*/_jsxDEV(Bar, {\n            dataKey: \"Sesiones\",\n            fill: CHART_COLORS.primary,\n            radius: [4, 4, 0, 0],\n            barSize: 30\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ChartWrapper, {\n        title: \"Top 5 Jugadores por Minutos\",\n        isLoading: loadingCharts,\n        hasData: playerMinutesData.length > 0,\n        children: /*#__PURE__*/_jsxDEV(BarChart, {\n          layout: \"vertical\",\n          data: playerMinutesData,\n          margin: {\n            top: 5,\n            right: 30,\n            left: 30,\n            bottom: 5\n          },\n          children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n            strokeDasharray: \"3 3\",\n            stroke: \"rgba(0,0,0,0.1)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 17\n          }, this), \" \", /*#__PURE__*/_jsxDEV(XAxis, {\n            type: \"number\",\n            tick: {\n              fill: CHART_COLORS.neutralLight\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 82\n          }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n            dataKey: \"name\",\n            type: \"category\",\n            width: 100,\n            tick: {\n              fill: CHART_COLORS.neutralDark,\n              fontSize: '0.8em'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n            content: /*#__PURE__*/_jsxDEV(CustomTooltip, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 35\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Bar, {\n            dataKey: \"minutes\",\n            name: \"Minutos Jugados\",\n            fill: CHART_COLORS.warning,\n            radius: [0, 4, 4, 0],\n            barSize: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"quick-links-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Acciones R\\xE1pidas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"quick-links-grid\",\n        children: [/*#__PURE__*/_jsxDEV(QuickLinkCard, {\n          icon: \"fa-user-plus\",\n          title: \"Gestionar Plantilla\",\n          description: \"A\\xF1ade o edita jugadores de tu equipo.\",\n          onClick: goToTeamManagement,\n          color: \"blue-ql\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(QuickLinkCard, {\n          icon: \"fa-clipboard-list\",\n          title: \"Crear Tarea\",\n          description: \"Define nuevos ejercicios para el equipo.\",\n          onClick: () => navigateTo('tasks'),\n          color: \"green-ql\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(QuickLinkCard, {\n          icon: \"fa-calendar-plus\",\n          title: \"Planificar Sesi\\xF3n\",\n          description: \"Organiza el pr\\xF3ximo entrenamiento.\",\n          onClick: () => navigateTo('sessions'),\n          color: \"orange-ql\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(QuickLinkCard, {\n          icon: \"fa-running\",\n          title: \"Registrar Minutos\",\n          description: \"Controla el tiempo de juego de tus jugadores.\",\n          onClick: () => navigateTo('minutes'),\n          color: \"purple-ql\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 275,\n    columnNumber: 5\n  }, this);\n}\n_s(CoachInicio, \"fvUXEdWuafpHRbvg0Gghwbfrwjs=\", false, function () {\n  return [useNavigate];\n});\n_c2 = CoachInicio;\nexport default CoachInicio;\nvar _c, _c2;\n$RefreshReg$(_c, \"CustomTooltip\");\n$RefreshReg$(_c2, \"CoachInicio\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","authHeader","PieChart","Pie","Cell","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","Sector","jsxDEV","_jsxDEV","CHART_COLORS","primary","success","warning","danger","info","purple","neutralLight","neutralDark","PIE_CHART_COLORS","CustomTooltip","active","payload","label","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","entry","index","style","color","name","value","_c","renderActiveShape","props","RADIAN","Math","PI","cx","cy","midAngle","innerRadius","outerRadius","startAngle","endAngle","fill","percent","sin","cos","sx","sy","mx","my","ex","ey","textAnchor","x","y","dy","fontWeight","fontSize","toFixed","stroke","strokeWidth","groupPlayerPositions","players","positionGroups","Porteros","Defensas","Mediocampistas","Delanteros","forEach","player","pos","position","includes","Object","entries","filter","group","CoachInicio","setActivePage","_s","navigate","user","JSON","parse","localStorage","getItem","team","setTeam","playerCount","setPlayerCount","upcomingSessionsCount","setUpcomingSessionsCount","avgAttendance","setAvgAttendance","playerPositionDistributionData","setPlayerPositionDistributionData","sessionFrequencyData","setSessionFrequencyData","playerMinutesData","setPlayerMinutesData","loadingTeamInfo","setLoadingTeamInfo","loadingSessionsInfo","setLoadingSessionsInfo","loadingAttendanceInfo","setLoadingAttendanceInfo","loadingCharts","setLoadingCharts","activePieIndex","setActivePieIndex","error","setError","tasksCountForStatCard","setTasksCountForStatCard","loadingTasksCountForStatCard","setLoadingTasksCountForStatCard","loadTeamData","loadTasksCountForStat","loadSessionsSummary","loadAttendanceSummary","loadChartData","onPieClick","_","teamResponse","fetch","headers","ok","Error","teamData","json","playersResponse","playersData","Array","isArray","err","prev","message","tasksResponse","tasksData","sessionsResponse","sessionsData","upcoming","s","Date","date","now","frequency","reduce","acc","session","month","toLocaleString","Sesiones","slice","response","data","average_attendance_percentage","replace","minutesResponse","allMinutes","playerMinutesSum","record","playerId","player_id","player_name","player_last_name","trim","minutes","minutes_played","values","sort","a","b","onPieEnter","navigateTo","section","goToTeamManagement","console","StatCard","icon","title","isLoading","onClick","QuickLinkCard","description","ChartWrapper","hasData","width","height","split","first_name","username","margin","e","i","activeIndex","activeShape","dataKey","paddingAngle","content","strokeDasharray","tick","wrapperStyle","radius","barSize","layout","top","right","left","bottom","type","_c2","$RefreshReg$"],"sources":["C:/Users/Marc/Desktop/futbol-dashboard/frontend/src/components/dashboard/CoachInicio.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { authHeader } from '../../services/auth';\r\nimport { PieChart, Pie, Cell, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, Sector } from 'recharts';\r\n\r\n// CONSTANTES Y FUNCIONES AUXILIARES GLOBALES AL ARCHIVO (si las tienes fuera del componente)\r\nconst CHART_COLORS = {\r\n  primary: 'var(--primary-color, #3f51b5)',\r\n  success: 'var(--success-color, #66bb6a)',\r\n  warning: 'var(--warning-color, #ffa726)',\r\n  danger: 'var(--danger-color, #f44336)',\r\n  info: 'var(--info-color, #29b6f6)',\r\n  purple: '#6f42c1',\r\n  neutralLight: 'rgba(0,0,0,0.5)',\r\n  neutralDark: 'rgba(0,0,0,0.8)',\r\n};\r\n\r\nconst PIE_CHART_COLORS = [\r\n  CHART_COLORS.primary, \r\n  CHART_COLORS.success, \r\n  CHART_COLORS.warning, \r\n  CHART_COLORS.info, \r\n  CHART_COLORS.purple\r\n];\r\n\r\nconst CustomTooltip = ({ active, payload, label }) => {\r\n  if (active && payload && payload.length) {\r\n    return (\r\n      <div className=\"custom-tooltip\">\r\n        <p className=\"label\">{`${label}`}</p>\r\n        {payload.map((entry, index) => (\r\n          <p key={`item-${index}`} style={{ color: entry.color }}>\r\n            {`${entry.name}: ${entry.value}`}\r\n          </p>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nconst renderActiveShape = (props) => {\r\n  const RADIAN = Math.PI / 180;\r\n  const { cx, cy, midAngle, innerRadius, outerRadius, startAngle, endAngle, fill, payload, percent, value } = props;\r\n  const sin = Math.sin(-RADIAN * midAngle);\r\n  const cos = Math.cos(-RADIAN * midAngle);\r\n  const sx = cx + (outerRadius + 8) * cos;\r\n  const sy = cy + (outerRadius + 8) * sin;\r\n  const mx = cx + (outerRadius + 25) * cos;\r\n  const my = cy + (outerRadius + 25) * sin;\r\n  const ex = mx + (cos >= 0 ? 1 : -1) * 20;\r\n  const ey = my;\r\n  const textAnchor = cos >= 0 ? 'start' : 'end';\r\n\r\n  return (\r\n    <g>\r\n      <text x={cx} y={cy} dy={4} textAnchor=\"middle\" fill={CHART_COLORS.neutralDark} fontWeight=\"bold\">\r\n        {payload.name}\r\n      </text>\r\n      <text x={cx} y={cy} dy={22} textAnchor=\"middle\" fill={CHART_COLORS.neutralLight} fontSize=\"0.9em\">\r\n        {`${value} (${(percent * 100).toFixed(0)}%)`}\r\n      </text>\r\n      <Sector cx={cx} cy={cy} innerRadius={innerRadius} outerRadius={outerRadius} startAngle={startAngle} endAngle={endAngle} fill={fill} stroke=\"#fff\" strokeWidth={2} />\r\n      <Sector cx={cx} cy={cy} startAngle={startAngle} endAngle={endAngle} innerRadius={outerRadius + 4} outerRadius={outerRadius + 8} fill={fill} />\r\n    </g>\r\n  );\r\n};\r\n\r\nconst groupPlayerPositions = (players) => {\r\n  const positionGroups = { Porteros: 0, Defensas: 0, Mediocampistas: 0, Delanteros: 0 };\r\n  players.forEach(player => {\r\n    const pos = player.position;\r\n    if (['POR'].includes(pos)) positionGroups.Porteros++;\r\n    else if (['DEF', 'LTD', 'LTI'].includes(pos)) positionGroups.Defensas++;\r\n    else if (['MCD', 'MC', 'MCO', 'ED', 'EI'].includes(pos)) positionGroups.Mediocampistas++;\r\n    else if (['SD', 'DEL'].includes(pos)) positionGroups.Delanteros++;\r\n  });\r\n  return Object.entries(positionGroups).map(([name, value]) => ({ name, value })).filter(group => group.value > 0);\r\n};\r\n\r\n\r\nfunction CoachInicio({ setActivePage }) {\r\n  const navigate = useNavigate();\r\n  const user = JSON.parse(localStorage.getItem('user'));\r\n\r\n  // --- ESTADOS ---\r\n  const [team, setTeam] = useState(null);\r\n  const [playerCount, setPlayerCount] = useState(0);\r\n  const [upcomingSessionsCount, setUpcomingSessionsCount] = useState(0);\r\n  const [avgAttendance, setAvgAttendance] = useState(0);\r\n  const [playerPositionDistributionData, setPlayerPositionDistributionData] = useState([]);\r\n  const [sessionFrequencyData, setSessionFrequencyData] = useState([]);\r\n  const [playerMinutesData, setPlayerMinutesData] = useState([]);\r\n  const [loadingTeamInfo, setLoadingTeamInfo] = useState(true);\r\n  const [loadingSessionsInfo, setLoadingSessionsInfo] = useState(true);\r\n  const [loadingAttendanceInfo, setLoadingAttendanceInfo] = useState(true);\r\n  const [loadingCharts, setLoadingCharts] = useState(true);\r\n  const [activePieIndex, setActivePieIndex] = useState(0);\r\n  const [error, setError] = useState('');\r\n  const [tasksCountForStatCard, setTasksCountForStatCard] = useState(0);\r\n  const [loadingTasksCountForStatCard, setLoadingTasksCountForStatCard] = useState(true);\r\n\r\n  // --- FUNCIONES DE CARGA DE DATOS Y useEffect ---\r\n  useEffect(() => {\r\n    if (!user || !user.team) {\r\n      setError('No tienes un equipo asignado. Contacta con un administrador.');\r\n      setLoadingTeamInfo(false); setLoadingTasksCountForStatCard(false); setLoadingSessionsInfo(false);\r\n      setLoadingAttendanceInfo(false); setLoadingCharts(false);\r\n      return;\r\n    }\r\n    loadTeamData();\r\n    loadTasksCountForStat();\r\n    loadSessionsSummary();\r\n    loadAttendanceSummary();\r\n    loadChartData();\r\n  }, [user?.team]); // Asegúrate que user.team esté en las dependencias si es necesario\r\n\r\n  const onPieClick = (_, index) => { // Renombrado para mayor claridad, o puedes mantener onPieEnter\r\n    setActivePieIndex(index);\r\n  };\r\n\r\n  const loadTeamData = async () => { /* ... tu implementación ... */ \r\n    setLoadingTeamInfo(true);\r\n    try {\r\n      const teamResponse = await fetch(`http://localhost:8000/api/teams/${user.team}/`, { headers: authHeader() });\r\n      if (!teamResponse.ok) throw new Error('Error al cargar datos del equipo');\r\n      const teamData = await teamResponse.json();\r\n      setTeam(teamData);\r\n\r\n      const playersResponse = await fetch(`http://localhost:8000/api/teams/${user.team}/players/`, { headers: authHeader() });\r\n      if (playersResponse.ok) {\r\n        const playersData = await playersResponse.json();\r\n        setPlayerCount(Array.isArray(playersData) ? playersData.length : 0);\r\n      }\r\n    } catch (err) {\r\n      setError(prev => `${prev} Equipo: ${err.message};`);\r\n    } finally {\r\n      setLoadingTeamInfo(false);\r\n    }\r\n  };\r\n  const loadTasksCountForStat = async () => { /* ... tu implementación ... */ \r\n    setLoadingTasksCountForStatCard(true);\r\n    try {\r\n      const tasksResponse = await fetch('http://localhost:8000/api/tasks/', { headers: authHeader() });\r\n      if (!tasksResponse.ok) throw new Error('Error al cargar tareas');\r\n      const tasksData = await tasksResponse.json();\r\n      setTasksCountForStatCard(tasksData.length);\r\n    } catch (err) {\r\n      setError(prev => `${prev} Conteo Tareas: ${err.message};`);\r\n    } finally {\r\n      setLoadingTasksCountForStatCard(false);\r\n    }\r\n  };\r\n  const loadSessionsSummary = async () => { /* ... tu implementación ... */ \r\n    setLoadingSessionsInfo(true);\r\n    try {\r\n      const sessionsResponse = await fetch('http://localhost:8000/api/sessions/', { headers: authHeader() });\r\n      if (!sessionsResponse.ok) throw new Error('Error al cargar sesiones');\r\n      const sessionsData = await sessionsResponse.json();\r\n      const upcoming = sessionsData.filter(s => new Date(s.date) >= new Date() && new Date(s.date) <= new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)).length;\r\n      setUpcomingSessionsCount(upcoming);\r\n      const frequency = sessionsData.reduce((acc, session) => {\r\n        const month = new Date(session.date).toLocaleString('default', { month: 'short' });\r\n        acc[month] = (acc[month] || 0) + 1;\r\n        return acc;\r\n      }, {});\r\n      setSessionFrequencyData(Object.entries(frequency).map(([name, value]) => ({ name, Sesiones: value })).slice(-6));\r\n    } catch (err) {\r\n      setError(prev => `${prev} Sesiones: ${err.message};`);\r\n    } finally {\r\n      setLoadingSessionsInfo(false);\r\n    }\r\n  };\r\n  const loadAttendanceSummary = async () => { /* ... tu implementación ... */ \r\n    setLoadingAttendanceInfo(true);\r\n    try {\r\n      const response = await fetch(`http://localhost:8000/api/teams/${user.team}/attendance/summary/`, { headers: authHeader() });\r\n      if(response.ok){\r\n        const data = await response.json();\r\n        setAvgAttendance(data.average_attendance_percentage || 0);\r\n      } else { setAvgAttendance(0); }\r\n    } catch (err) {\r\n       setError(prev => `${prev} Asistencia: ${err.message};`);\r\n       setAvgAttendance(0);\r\n    } finally {\r\n      setLoadingAttendanceInfo(false);\r\n    }\r\n  };\r\n  const loadChartData = async () => { /* ... tu implementación ... */ \r\n    setLoadingCharts(true);\r\n    setError(prev => prev.replace(/Gráficos: [^;]+;/g, ''));\r\n    try {\r\n      const playersResponse = await fetch(`http://localhost:8000/api/teams/${user.team}/players/`, { headers: authHeader() });\r\n      if (playersResponse.ok) {\r\n        const playersData = await playersResponse.json();\r\n        if (Array.isArray(playersData)) setPlayerPositionDistributionData(groupPlayerPositions(playersData));\r\n        else setPlayerPositionDistributionData([]);\r\n      } else throw new Error('Error al cargar jugadores para el gráfico de distribución');\r\n\r\n      const minutesResponse = await fetch(`http://localhost:8000/api/teams/${user.team}/minutes/?matches=false`, { headers: authHeader() });\r\n      if (minutesResponse.ok) {\r\n          const allMinutes = await minutesResponse.json();\r\n          const playerMinutesSum = allMinutes.reduce((acc, record) => {\r\n              const playerId = record.player_id || record.player;\r\n              acc[playerId] = acc[playerId] || { name: `${record.player_name || 'Jugador'} ${record.player_last_name || ''}`.trim(), minutes: 0 };\r\n              acc[playerId].minutes += record.minutes_played || 0;\r\n              return acc;\r\n          }, {});\r\n          setPlayerMinutesData(Object.values(playerMinutesSum).sort((a, b) => b.minutes - a.minutes).slice(0, 5));\r\n      } else throw new Error('Error al cargar minutos de jugadores');\r\n    } catch (err) {\r\n        setError(prev => `${prev} Gráficos: ${err.message};`);\r\n    } finally {\r\n      setLoadingCharts(false);\r\n    }\r\n  };\r\n  const onPieEnter = (_, index) => { setActivePieIndex(index); };\r\n\r\n  // ***** DEFINICIÓN DE FUNCIONES DE NAVEGACIÓN *****\r\n  const navigateTo = (section) => {\r\n    setActivePage(section);\r\n  };\r\n\r\n  const goToTeamManagement = () => {\r\n    if (user && user.team) {\r\n      navigate(`/team/${user.team}`);\r\n    } else {\r\n      console.error(\"Usuario o equipo del usuario no definido para goToTeamManagement.\");\r\n      setError(prev => `${prev} No se puede acceder a la gestión del equipo (usuario/equipo no definido);`);\r\n    }\r\n  };\r\n\r\n  // --- COMPONENTES LOCALES DE UI (SI LOS TIENES AQUÍ) ---\r\n  const StatCard = ({ icon, title, value, color, isLoading, onClick }) => (\r\n    <div className={`stat-card coach-stat-card ${color}`} onClick={onClick}>\r\n      <div className=\"stat-card-icon\"><i className={`fas ${icon}`}></i></div>\r\n      <div className=\"stat-card-info\">\r\n        <span className=\"stat-card-value\">{isLoading ? <i className=\"fas fa-spinner fa-spin\"></i> : value}</span>\r\n        <span className=\"stat-card-title\">{title}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const QuickLinkCard = ({ icon, title, description, onClick, color }) => (\r\n    <div className={`quick-link-card coach-quick-link ${color}`} onClick={onClick}>\r\n      <div className=\"quick-link-icon\"><i className={`fas ${icon}`}></i></div>\r\n      <div className=\"quick-link-info\"><h3>{title}</h3><p>{description}</p></div>\r\n      <div className=\"quick-link-arrow\"><i className=\"fas fa-chevron-right\"></i></div>\r\n    </div>\r\n  );\r\n\r\n  const ChartWrapper = ({ title, children, isLoading, hasData }) => (\r\n    <div className=\"chart-container coach-chart-container\">\r\n      <h3>{title}</h3>\r\n      {isLoading ? ( <div className=\"chart-loading\"><i className=\"fas fa-spinner fa-spin\"></i> Cargando datos...</div> )\r\n       : hasData === false || (Array.isArray(hasData) && hasData.length === 0) ? ( <p className=\"no-data-chart\">No hay datos disponibles.</p> )\r\n       : ( <ResponsiveContainer width=\"100%\" height={300}>{children}</ResponsiveContainer> )}\r\n    </div>\r\n  );\r\n  \r\n  // --- MANEJO DE ERROR INICIAL ---\r\n  if (error && !team && !user?.team) { \r\n    return (\r\n      <div className=\"content-wrapper coach-inicio-page\">\r\n        <div className=\"coach-welcome-header error-header\">\r\n          <h1>Error</h1>\r\n          <p>{error.includes(\"equipo asignado\") ? error : \"Error al cargar datos. \" + error.split(';')[0]}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- JSX DEL COMPONENTE ---\r\n  return (\r\n    <div className=\"content-wrapper coach-inicio-page\">\r\n      <div className=\"coach-welcome-header\">\r\n        <h1>Bienvenido, Entrenador {user?.first_name || user?.username}!</h1>\r\n        <p>Aquí tienes un resumen de la actividad de tu equipo: {loadingTeamInfo && !team ? <i className=\"fas fa-spinner fa-spin\"></i> : <strong>{team?.name || 'Tu Equipo'}</strong>}</p>\r\n      </div>\r\n\r\n      {error && <div className=\"error-message\" style={{margin: '0 20px 20px 20px'}}>{error.split(';').map((e, i) => e.trim() && <div key={i}>{e.trim()}</div>)}</div>}\r\n\r\n      <div className=\"stats-grid\">\r\n        <StatCard icon=\"fa-users\" title=\"Jugadores\" value={playerCount} isLoading={loadingTeamInfo} color=\"blue\" onClick={() => navigateTo('myteam')} />\r\n        <StatCard icon=\"fa-tasks\" title=\"Tareas Creadas\" value={tasksCountForStatCard} isLoading={loadingTasksCountForStatCard} color=\"green\" onClick={() => navigateTo('tasks')} />\r\n        <StatCard icon=\"fa-calendar-check\" title=\"Próximas Sesiones\" value={upcomingSessionsCount} isLoading={loadingSessionsInfo} color=\"orange\" onClick={() => navigateTo('sessions')} />\r\n        <StatCard icon=\"fa-user-check\" title=\"Asistencia Media\" value={`${avgAttendance}%`} isLoading={loadingAttendanceInfo} color=\"purple\" onClick={() => navigateTo('attendance')} />\r\n      </div>\r\n\r\n      <div className=\"charts-section\">\r\n        <ChartWrapper \r\n          title=\"Distribución de Jugadores por Posición\" \r\n          isLoading={loadingCharts} \r\n          hasData={playerPositionDistributionData.length > 0}\r\n        >\r\n          <PieChart>\r\n            <Pie\r\n              activeIndex={activePieIndex}\r\n              activeShape={renderActiveShape}\r\n              data={playerPositionDistributionData}\r\n              cx=\"50%\"\r\n              cy=\"50%\"\r\n              innerRadius={60}\r\n              outerRadius={90}\r\n              fill={CHART_COLORS.primary}\r\n              dataKey=\"value\"\r\n              onClick={onPieClick} // CAMBIO: de onMouseEnter a onClick\r\n              paddingAngle={2}\r\n            >\r\n              {playerPositionDistributionData.map((entry, index) => (\r\n                <Cell key={`cell-${index}`} fill={PIE_CHART_COLORS[index % PIE_CHART_COLORS.length]} />\r\n              ))}\r\n            </Pie>\r\n            <Tooltip content={<CustomTooltip />} />\r\n          </PieChart>\r\n        </ChartWrapper>\r\n\r\n        <ChartWrapper title=\"Frecuencia de Sesiones (Últimos meses)\" isLoading={loadingSessionsInfo} hasData={sessionFrequencyData.length > 0}>\r\n          <BarChart data={sessionFrequencyData}>\r\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(0,0,0,0.1)\" /> <XAxis dataKey=\"name\" tick={{ fill: CHART_COLORS.neutralLight }} /> <YAxis tick={{ fill: CHART_COLORS.neutralLight }} />\r\n            <Tooltip content={<CustomTooltip />} /> <Legend wrapperStyle={{ color: CHART_COLORS.neutralDark }} />\r\n            <Bar dataKey=\"Sesiones\" fill={CHART_COLORS.primary} radius={[4, 4, 0, 0]} barSize={30}/>\r\n          </BarChart>\r\n        </ChartWrapper>\r\n        \r\n        <ChartWrapper title=\"Top 5 Jugadores por Minutos\" isLoading={loadingCharts} hasData={playerMinutesData.length > 0}>\r\n            <BarChart layout=\"vertical\" data={playerMinutesData} margin={{ top: 5, right: 30, left: 30, bottom: 5 }}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(0,0,0,0.1)\" /> <XAxis type=\"number\" tick={{ fill: CHART_COLORS.neutralLight }} />\r\n                <YAxis dataKey=\"name\" type=\"category\" width={100} tick={{ fill: CHART_COLORS.neutralDark, fontSize: '0.8em' }} />\r\n                <Tooltip content={<CustomTooltip />} />\r\n                <Bar dataKey=\"minutes\" name=\"Minutos Jugados\" fill={CHART_COLORS.warning} radius={[0, 4, 4, 0]} barSize={20} />\r\n            </BarChart>\r\n        </ChartWrapper>\r\n      </div>\r\n\r\n      <div className=\"quick-links-section\">\r\n        <h2>Acciones Rápidas</h2>\r\n        <div className=\"quick-links-grid\">\r\n          <QuickLinkCard icon=\"fa-user-plus\" title=\"Gestionar Plantilla\" description=\"Añade o edita jugadores de tu equipo.\" onClick={goToTeamManagement} color=\"blue-ql\" />\r\n          <QuickLinkCard icon=\"fa-clipboard-list\" title=\"Crear Tarea\" description=\"Define nuevos ejercicios para el equipo.\" onClick={() => navigateTo('tasks')} color=\"green-ql\" />\r\n          <QuickLinkCard icon=\"fa-calendar-plus\" title=\"Planificar Sesión\" description=\"Organiza el próximo entrenamiento.\" onClick={() => navigateTo('sessions')} color=\"orange-ql\" />\r\n          <QuickLinkCard icon=\"fa-running\" title=\"Registrar Minutos\" description=\"Controla el tiempo de juego de tus jugadores.\" onClick={() => navigateTo('minutes')} color=\"purple-ql\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CoachInicio;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}